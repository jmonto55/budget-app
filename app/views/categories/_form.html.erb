<%= form_with(model: category, class: "w-full bg-white flex flex-col") do |form| %>
  <% if category.errors.any? %>
    <div class="m-auto text-red-500 flex flex-col" id="error_explanation">
      <ul class="m-auto mt-5 m-auto py-2 px-3 bg-red-50 text-red-500 font-medium rounded-lg inline-block">
        <% category.errors.full_messages.each do |msg| %>
          <li>🎯<%= msg %></li>
        <% end %>
      </ul>
    </div>
  <% end %>
  <div>
      <%= form.text_field :name, placeholder: "Name", class: 'mt-4 placeholder-[#babfc6] w-full border-t-[#babfc5] border-transparent w-full', required: true %>
  </div>
  <hr class="m-auto w-[95%]">
  <div class="p-4 w-full flex flex-col">
    <%= form.label :icon, class: "text-[#babfc6] mb-4" %>
    <%= form.select :icon, options_for_select([
      ["🚗", "https://img.icons8.com/2266EE/color/sedan"],
      ["🏠", "https://img.icons8.com/2266EE/color/home"],
      ["🥗", "https://img.icons8.com/2266EE/color/food-receiver"],
      ["🏥", "https://img.icons8.com/2266EE/color/hospital"],
      ["💹", "https://img.icons8.com/2266EE/color/bank"],
      ["🏈", "https://img.icons8.com/2266EE/color/sport"],
      ["🐕‍🦺", "https://img.icons8.com/2266EE/color/dog"],
      ["🧍🏽", "https://img.icons8.com/2266EE/color/debt"],
    ]), class: '', id: 'icon-select' %>
  </div>
  <img id="icon-preview" src="" alt="" class="w-full">
  <div class="">
    <%= form.submit "Create", id: "hidden-submit_3", class: "hidden" %>
  </div>
<% end %>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const iconPreview = document.getElementById('icon-preview');
    const iconSelect = document.getElementById('icon-select');
    

    iconSelect.addEventListener('change', (event) => {
      const selectedOption = event.target.options[event.target.selectedIndex];
      const selectedOptionSrc = selectedOption.value;
      iconPreview.src = selectedOptionSrc;
    });
  });
</script>